CREATE TABLE [tb_cliente]( [id_cliente] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [email] VARCHAR(50), [cod_cliente] INTEGER NOT NULL, [nome] VARCHAR(200) NOT NULL, [razao_social] VARCHAR(200), [cnpj] INTEGEREGER64(14), [cpf] INTEGEREGER64(11), [endereco] VARCHAR(200), [coord_x] INTEGEREGER64, [coord_y] INTEGEREGER64, [ativo] NUMBER(1) NOT NULL DEFAULT 1);
CREATE TABLE [tb_produto]( [id_produto] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [nome] VARCHAR(50) NOT NULL ON CONFLICT FAIL, [foto] VARCHAR(300) NOT NULL, [ativo] NUMBER(1) NOT NULL, [qtd_limite] INTEGER NOT NULL DEFAULT 0, [cod_produto] INTEGER NOT NULL DEFAULT 0);
CREATE TABLE [tb_forma_pagto]( [id_forma_pagto] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [cod_forma_pagto] INTEGER NOT NULL, [descr_forma_pagto] VARCHAR(200) NOT NULL, [val_perc] DECIMAL NOT NULL);
CREATE TABLE [tb_status_venda]( [id_status_venda] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [cod_status] INTEGER NOT NULL, [descr_status] VARCHAR(30) NOT NULL);
CREATE TABLE [tb_vendedor]( [id_vendedor] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [nome] VARCHAR(50) NOT NULL, [perc_venda] DECIMAL NOT NULL, [ativo] NUMBER(1) NOT NULL DEFAULT 0 );
CREATE TABLE [tb_tipo_telefone]( [id_tipo_telefone] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [descr_tipo_telefone] VARCHAR(30) NOT NULL);
CREATE TABLE [tb_tipo_pedido]( [id_tipo_pedido] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [cod_tipo_pedido] INTEGER NOT NULL, [descr_tipo_pedido] VARCHAR(30) NOT NULL);
CREATE TABLE [tb_estoque]( [id_estoque] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [id_produto] INTEGER NOT NULL ON CONFLICT FAIL, [valor_produto] DECIMAL NOT NULL, [valor_final] DECIMAL NOT NULL, [alerta_falta] INTEGER NOT NULL REFERENCES tb_produto([id_produto]) ON DELETE CASCADE, [quantidade] INTEGER NOT NULL DEFAULT 0);
CREATE TABLE [tb_pedido]( [id_pedido] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [valor_total] DECIMAL NOT NULL, [endereco] VARCHAR(200) NOT NULL ON CONFLICT FAIL, [coord_x] INT64, [coord_y] INT64, [id_forma_pagto] INTEGER NOT NULL REFERENCES tb_forma_pagto([id_forma_pagto]) ON DELETE NO ACTION, [id_venda] INTEGER NOT NULL REFERENCES tb_venda([id_venda]) ON DELETE CASCADE, [id_tipo_pedido] INTEGER NOT NULL REFERENCES tb_tipo_pedido([id_tipo_pedido]));
CREATE TABLE [tb_pedido_produto]( [id_pedido_produto] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [id_pedido] INTEGER NOT NULL ON CONFLICT FAIL REFERENCES tb_pedido([id_pedido]) ON DELETE CASCADE ON UPDATE CASCADE, [id_produto] INTEGER NOT NULL ON CONFLICT FAIL REFERENCES tb_produto([id_produto]) ON DELETE RESTRICT, [quantidade] INTEGER NOT NULL ON CONFLICT FAIL);
CREATE TABLE [tb_telefone]( [id_telefone] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [id_cliente] INTEGER NOT NULL REFERENCES tb_cliente([id_cliente]) ON DELETE CASCADE, [telefone] INTEGER NOT NULL, [id_tipo_telefone] INTEGER NOT NULL REFERENCES tb_tipo_telefone([id_tipo_telefone]) ON DELETE NO ACTION);
CREATE TABLE [tb_venda]( [id_venda] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [valor_comissao] DECIMAL NOT NULL, [id_cliente] INTEGER NOT NULL ON CONFLICT FAIL REFERENCES tb_cliente([id_cliente]) ON DELETE SET DEFAULT ON UPDATE SET DEFAULT, [id_vendedor] INTEGER NOT NULL ON CONFLICT FAIL REFERENCES tb_vendedor([id_vendedor]) ON DELETE CASCADE ON UPDATE CASCADE, [id_pedido] INTEGER NOT NULL ON CONFLICT FAIL REFERENCES tb_pedido([id_pedido]) ON DELETE RESTRICT ON UPDATE NO ACTION, [id_status_venda] INTEGER NOT NULL ON CONFLICT FAIL REFERENCES tb_status_venda([id_status_venda]), [sincronizado] NUMBER(1) NOT NULL DEFAULT 0);
CREATE TABLE [tb_configuracao]([id_configuracao] INTEGER PRIMARY KEY ASC ON CONFLICT FAIL AUTOINCREMENT NOT NULL, [endereco_servico] VARCHAR(300) NOT NULL, [pasta_forma_pagto] VARCHAR(300) NOT NULL, [pasta_fotos] VARCHAR(300) NOT NULL, [tipo_config] NCHAR(1) NOT NULL, [pasta_cliente] VARCHAR(300) NOT NULL, [pasta_estoque] VARCHAR(300) NOT NULL, [pasta_produto] VARCHAR(300) NOT NULL, [pasta_venda] VARCHAR(300) NOT NULL, [pasta_vendedor] VARCHAR(300) NOT NULL, [principal] NUMBER(1) NOT NULL DEFAULT 1);
--Carga Inicial database
INSERT INTO [tb_tipo_telefone] (descr_tipo_telefone) VALUES ('FIXO');
INSERT INTO [tb_tipo_telefone] (descr_tipo_telefone) VALUES ('CELULAR');
INSERT INTO [tb_tipo_pedido] (cod_tipo_pedido, descr_tipo_pedido) VALUES (1, 'VENDA');
INSERT INTO [tb_tipo_pedido] (cod_tipo_pedido, descr_tipo_pedido) VALUES (2, 'TROCA');
INSERT INTO [tb_tipo_pedido] (cod_tipo_pedido, descr_tipo_pedido) VALUES (3, 'DEVOLUCAO');
INSERT INTO [tb_status_venda] (cod_status, descr_status) VALUES (1, 'PAGO');
INSERT INTO [tb_status_venda] (cod_status, descr_status) VALUES (2, 'NAO_PAGO');
INSERT INTO [tb_configuracao] (endereco_servico, pasta_forma_pagto, pasta_fotos, tipo_config, pasta_cliente, pasta_estoque, pasta_produto, pasta_venda, pasta_vendedor, principal ) values ('https://dl.dropboxusercontent.com/s/', 'iks2sqzhtylaen3', 'vxpn8dlp9l8y4ck', '1', 'dh9utttcgq7qa95', 'jnkkvykemi6681b', 'sm9z6xlj7m2lkeb', '56wf3el68whhf6w', 'unmgecnxg4s9ri1', '0');
INSERT INTO [tb_vendedor] (nome, perc_venda) VALUES ('TESTE', 1.00);